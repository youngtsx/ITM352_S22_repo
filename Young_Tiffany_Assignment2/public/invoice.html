<!-- This file will display an invoice based off of https://www.bootdey.com/snippets/view/Invoice-with-ribbon, w3schoools bootstraps https://www.w3schools.com/bootstrap/bootstrap_templates.asp "online store", and reece nagaoka f21 -->
<script src="./products.js" type="text/javascript"></script>
<script>
  let params = (new URL(document.location)).searchParams;
  var quantities = [];
  if (params.has('quantity')) {
    quantities = JSON.parse(params.get(`quantity`));
  }
</script>

<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta http-equiv="X-UA-Compatible" content="IE=edge">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">

  <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/css/bootstrap.min.css">
  <link rel="stylesheet" href="./stylesheets/invoicestyle.css">
  <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.5.1/jquery.min.js"></script>
  <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.4.1/js/bootstrap.min.js"></script>
  <title>Invoice || Tiffany's Boba Shop</title>
</head>

<body>
  <nav class="navbar navbar-inverse">
    <div class="container-fluid">
      <div class="navbar-header">
        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#myNavbar">
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
          <span class="icon-bar"></span>
        </button>
      </div>
      <div class="collapse navbar-collapse" id="myNavbar">
        <ul class="nav navbar-nav">
          <li id="logotext">Tiffany's Boba Shop</li>
          <li><a href="index.html">Home</a></li>
          <li><a href="shop.html">Products</a></li>
        </ul>
        <ul class="nav navbar-nav navbar-right">
          <li><a href="login.html"><span class="glyphicon glyphicon-user"></span> Account</a></li>
          <li><a href="cart.html"><span class="glyphicon glyphicon-shopping-cart"></span> Cart</a></li>
        </ul>
      </div>
    </div>
  </nav>
  <table class="body-wrap">
    <tbody>
      <tr>
        <td></td>
        <td class="container" width="600">
          <div class="content">
            <table class="main" width="100%" cellpadding="0" cellspacing="0">
              <tbody>
                <tr>
                  <td class="content-wrap aligncenter">
                    <table width="100%" cellpadding="0" cellspacing="0">
                      <div class="row table-row">
                        <table class="table table-striped">
                          <thead>
                          <tbody>
                            <tr>
                              <th style="width:20%">Item</th>
                              <th class="text-right" style="width:15%">Quantity</th>
                              <th class="text-right" style="width:15%">Price</th>
                              <th class="text-right" style="width:15%">Extended Price</th>
                            </tr>
                            </thead>
                            <script>
                              // Compute sub-total
                              var subtotal = 0;

                              for (i = 0; i < products.length; i++) {
                                if (quantities[i] > 0) {
                                  extended_price = quantities[i] * products[i].price;
                                  subtotal += extended_price;
                                  document.write(`
                                  <tr>
			                              <td>${products[i].item}</td>
			                              <td class="text-right">${quantities[i]}</td>
			                              <td class="text-right">$${products[i].price}</td>
			                              <td class="text-right">$${extended_price.toFixed(2)}</td>
                                  </tr>
                                  `);
                                }
                              };
                              // Compute tax
                              var tax_rate = 0.0475;
                              var tax = tax_rate * subtotal;

                              // Compute shipping
                              if (subtotal <= 10) {
                                shipping = 2;
                              }
                              else if (subtotal <= 30) {
                                shipping = 5;
                              }
                              else {
                                shipping = 0.05 * subtotal; // 5% of subtotal
                              }
                              // Compute grand total
                              var grand_total = subtotal + tax + shipping;
                            </script>
                          </tbody>
                        </table>
                        <div class="col-xs-6 text-right pull-right invoice-total">
                          <p>Subtotal : $
                            <script>document.write(subtotal.toFixed(2));</script>
                          </p>
                          <p>Tax @ 4.75% : $
                            <script>document.write(tax.toFixed(2));</script>
                          </p>
                          <p>Shipping : $
                            <script>document.write(shipping.toFixed(2));</script>
                          </p>
                          <p><strong>Grand Total : $
                              <script>document.write(grand_total.toFixed(2));</script>
                            </strong> </p>
                          <div style="font-family: Arial;">
                            <br>
                            <b>
                              OUR SHIPPING POLICY IS : A subtotal $0 - $9.99 will be $2 shipping <br>
                              A subtotal $10 - $29.99 will be $5 shipping <br>
                              Subtotals over $30 will be charged 5% of the subtotal amount <br>
                            </b>
                          </div>
</body>
<div class="footer">
  <p>&copy; Tiffany Young 2022</p>
  <br>
</div>
</html>